# دليل إعداد Cloudinary لحل مشكلة رفع الصور

## المشكلة
عند محاولة رفع صورة للطالب في صفحة المسؤول، لا يتم رفع الصورة بنجاح.

## الحلول المحتملة

### 1. التحقق من تكوين Cloudinary

#### أ. إنشاء حساب Cloudinary
1. اذهب إلى [cloudinary.com](https://cloudinary.com)
2. أنشئ حساب جديد أو سجل دخول
3. احصل على بيانات التكوين من لوحة التحكم

#### ب. الحصول على بيانات التكوين
1. في لوحة تحكم Cloudinary، اذهب إلى **Dashboard**
2. انسخ البيانات التالية:
   - **Cloud Name** (اسم السحابة)
   - **API Key** (مفتاح API)
   - **API Secret** (السر)

#### ج. إنشاء Upload Preset
1. في لوحة تحكم Cloudinary، اذهب إلى **Settings** > **Upload**
2. انتقل إلى **Upload presets**
3. اضغط على **Add upload preset**
4. أدخل اسم للـ preset (مثل "ibrahim")
5. **مهم**: تأكد من تفعيل **Unsigned** في الإعدادات
6. احفظ الـ preset

### 2. تحديث ملف التكوين

افتح ملف `src/integrations/cloudinary/config.ts` وقم بتحديث البيانات:

```typescript
export const cloudinaryConfig = {
  cloudName: "YOUR_CLOUD_NAME", // استبدل باسم السحابة الخاص بك
  uploadPreset: "YOUR_UPLOAD_PRESET", // استبدل باسم الـ preset الذي أنشأته
  apiKey: "YOUR_API_KEY", // استبدل بمفتاح API الخاص بك
  apiSecret: "YOUR_API_SECRET" // استبدل بالسر الخاص بك
};
```

### 3. اختبار التكوين

1. افتح وحدة تحكم المتصفح (F12 > Console)
2. اذهب إلى صفحة إضافة طالب
3. اضغط على زر "اختبار التكوين" في قسم رفع الصورة
4. تحقق من الرسائل في وحدة التحكم

### 4. الأخطاء الشائعة وحلولها

#### خطأ: "Upload preset not found"
- تأكد من أن اسم الـ upload preset صحيح
- تأكد من تفعيل "Unsigned" في إعدادات الـ preset

#### خطأ: "Cloud name not found"
- تأكد من أن اسم السحابة صحيح
- تأكد من أن الحساب مفعل

#### خطأ: "Network error"
- تحقق من اتصال الإنترنت
- تحقق من إعدادات الجدار الناري
- تأكد من أن CORS مفعل في Cloudinary

#### خطأ: "File too large"
- تأكد من أن حجم الصورة أقل من 5MB
- اضغط الصورة قبل الرفع

### 5. إعدادات CORS (إذا لزم الأمر)

في لوحة تحكم Cloudinary:
1. اذهب إلى **Settings** > **Security**
2. في قسم **Allowed origins**، أضف:
   - `http://localhost:3000` (للتطوير)
   - `https://yourdomain.com` (للإنتاج)

### 6. اختبار شامل

بعد تحديث التكوين:
1. أعد تشغيل التطبيق
2. اذهب إلى صفحة إضافة طالب
3. حاول رفع صورة
4. تحقق من وحدة التحكم للأخطاء
5. تحقق من أن الصورة تظهر في لوحة تحكم Cloudinary

### 7. معلومات إضافية للتشخيص

إذا استمرت المشكلة، تحقق من:
- رسائل الخطأ في وحدة تحكم المتصفح
- رسائل الخطأ في وحدة تحكم الخادم
- إعدادات الشبكة والجدار الناري
- صلاحيات الحساب في Cloudinary

### 8. الاتصال بالدعم

إذا لم تحل المشكلة:
1. التقط لقطة شاشة لرسائل الخطأ
2. احفظ سجل وحدة التحكم
3. تواصل مع فريق الدعم مع هذه المعلومات 